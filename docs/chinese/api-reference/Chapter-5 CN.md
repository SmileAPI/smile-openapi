---
title: 文档处理
excerpt: ''
category: 62ce2a159aafea009af30da7
slug: chapter-5-cn
---

**Smile Snap** 是 Smile API 强大的文档处理产品，它既可以与 Wink Widget无缝集成，也可以作为独立 API 服务使用。Smile Snap 的自动分析功能可以从所得税文件和工资单中提取关键信息，如就业详情和收入数据，然后分析文档是否存在篡改迹象、计算不一致等问题。

此功能消除了手动转录数据的需求，确保了验证过程的高效和无差错。这不仅提高了效率，还有助于创建更准确和全面的用户档案。

如果用户无法使用在线验证方法，Smile Snap 还可以作为可靠的备用验证方法。如果主要验证方法遇到问题，用户可以提交相关文档，确保验证过程的稳健和安全。

---
<!-- focus: false -->
![Checklist](https://img.icons8.com/ios/50/000000/checklist--v1.png)
## 集成步骤

在您的流程中实施 Smile API 的文档处理服务只需几个步骤：

1. **向 Smile API 提供文档**

   > 有两种方式向 Smile API 提供文档或文件进行处理：
   > 1. 使用 [Wink Widget SDK](/reference/chapter-4-cn#client-sdk) 快速集成到您的用户流程中。
   > 2. 使用 [Archive API](/reference/archives) 对用户旅程进行更精细的控制。

2. **检索分析后的数据**

   > 一旦数据上传完成，我们的智能文档处理引擎会自动根据预期的文件类型对支持的文档类型进行检查和分类。
   >
   > 分类完成后，我们的引擎会解析文件，从文档中提取数据并进行相应的标记。每种文件类型会有不同的数据集合，并会反映在文档分析中。
   >
   > 分析完成后，存档数据负载将通过 Webhook 发送给您，或者您也可以直接调用存档 API。更多信息请参阅 API 文档。

3. **对提取的数据进行验证**

   > 我们目前正在努力将这些调用集成到 API 中，但您可以使用从*步骤 2* 中检索到的数据调用我们的 [Verification API](/reference/verification)，以验证您的验证对象的信息，如姓名和身份证号码。这为您提供了另一层保证，确保文档是有效的。

<!-- ## 如何设置 -->
<!-- TODO: 快速入门或类似内容 -->

> 🚧 警告
>
> SANDBOX模式下的存档仅返回特定的工资单。要在SANDBOX模式下测试存档，您可以在开发者门户中下载示例工资单，并通过 Wink Widget或 API 上传。在SANDBOX模式下上传其他文件将返回错误。

<!-- ## 获取用户数据 -->
<!-- ## 配置 -->

---
<!-- focus: false -->
![Event](https://img.icons8.com/ios/50/000000/important-event.png)
## 事件通知

当用户在 Wink Widget屏幕上操作时，用户执行的任何活动都会被捕获，这些活动要么用于更新模态窗口的消息和展示，要么发送给 Smile 以检索任何与源相关的数据。

### 上传成功

如果用户能够通过扫描或拍摄的文档成功上传就业和收入数据，链接状态将更改为 "STARTED"。用户的上传状态可以随时通过 ``/archives`` 端点进行查询。捕获的事件示例包括：

| Event       | 描述                                |
|-------------|-----------------------------------|
| STARTED     | 上传成功，已开始分析是否可以提取数据。               |
| ANALYZED    | 分析完成，数据已成功提取（通过 OCR）并转换为 JSON 格式。 |
| UNSUPPORTED | 上传的文件类型无法分析。无法自动提取数据。             |
| ERROR       | 上传文件的分析过程中出现问题。                   |
| REVOKED     | 用户撤销了共享上传文件中数据的权限。                |

---
<!-- focus: false -->
![Storage](https://img.icons8.com/?size=50&id=1476&format=png&color=000000)
## 维护用户数据

Smile API 仅在以下情况之一发生之前存储用户数据：

1. 用户通过 Wink Widget撤销对其文档的访问权限
2. 通过撤销 API 撤销访问权限（即，如果由开发者发起）
3. 自文档上传之日起已过去 60 天

为确保在最长 60 天的时间范围之后仍能持续访问文档，请确保您在自己的服务器上检索并存储用户的文档。一旦您从 Smile 服务器检索到文档，您可以使用撤销 API 指示 Smile 删除该文档。当用户手动撤销其文档共享时，您还将收到 Smile 发出的事件通知。
