---
title: Archives
excerpt: ""
category: 62ce2a159aafea009af30daa
slug: archives
---

Smile API è¿˜å¯ä»¥å­˜å‚¨å’Œå¤„ç†ç…§ç‰‡åŠå…¶ä»–æ–‡ä»¶ï¼Œä»¥å¸®åŠ©éªŒè¯ç”¨æˆ·çš„è®°å½•ã€‚å¯ç”¨åç”¨æˆ·å¯ä»¥ä¸Šä¼ ç…§ç‰‡ã€æ‰«æä»¶æˆ– PDF æ–‡ä»¶ï¼Œä½œä¸ºä¾›æ‚¨è®°å½•å’ŒéªŒè¯ä½¿ç”¨çš„å¤‡ä»½æˆ–é¢å¤–çš„æ•°æ®ç‚¹ã€‚æ”¯æŒä»¥ä¸‹æ–‡ä»¶ç±»åˆ«ï¼š

| Archive ç±»å‹          | æ˜¯å¦é€šè¿‡ Wink Widget ä¸Šä¼  | æ˜¯å¦é€šè¿‡ API ä¸Šä¼  |
|:--------------------|:--------------------|:------------|
| SSS Records         | âœ…                   | âŒ           |
| Income Tax Document | âœ…                   | âŒ           |
| Payslips            | âœ…                   | âœ…           |
| Company ID          | âœ…                   | âŒ           |

å¯¹ SSS è®°å½•ã€æ‰€å¾—ç¨æ–‡ä»¶å’Œå·¥èµ„å•è¿›è¡Œé¢å¤–åˆ†æï¼Œä»¥ä¾¿ä»ä¸Šä¼ çš„æ–‡ä»¶ä¸­æ£€ç´¢åŸºæœ¬ä¿¡æ¯ï¼Œå¦‚å°±ä¸šå’Œæ”¶å…¥ä¿¡æ¯ã€‚è¿™æ ·ï¼Œæ‚¨å°±å¯ä»¥ç›´æ¥ä»æ–‡ä»¶ä¸­è·å–ä¿¡æ¯ï¼Œè€Œæ— éœ€æ‰‹åŠ¨è½¬å½•æ•°æ®ã€‚

è¿™äº›ç”¨æˆ·ä¸Šä¼ çš„æ–‡ä»¶å¯ä»¥é€šè¿‡ Archives ç«¯ç‚¹è¿›è¡Œæ£€ç´¢ï¼Œä»¥ä¾¿åœ¨æ‚¨éœ€è¦æ—¶ä¸‹è½½æˆ–è¿›è¡Œäººå·¥éªŒè¯ã€‚

æˆ‘ä»¬æ¥å—æœ€å¤§ä¸º 15MB çš„æ–‡ä»¶ï¼Œå¯ä»¥æ˜¯ä»¥ä¸‹æ ¼å¼ï¼š

- Portable Network Graphic files (`.png`)
- Portable Document Format files (`.pdf`)
- Joint Photographic Experts Group files (`.jpg` or `.jpeg`)
- Tag Image File Format files (`.tiff`)

åœ¨ç”¨æˆ·é€šè¿‡ SDK æˆ– API æ’¤é”€è´¦æˆ·ä¹‹å‰ï¼Œæ–‡ä»¶éƒ½ä¼šè¢«å‚¨å­˜èµ·æ¥ã€‚

ä»å¯æ ¸å®çš„æ¥æºï¼ˆå¦‚å·¥èµ„ç³»ç»Ÿï¼‰è‡ªåŠ¨æ£€ç´¢çš„æ–‡ä»¶å’Œæ¡£æ¡ˆå°†åœ¨ [Documents ç«¯ç‚¹](/reference/documents) ä¸‹æ‰¾åˆ°ã€‚ä»æ–‡ä»¶ä¸­æ£€ç´¢åˆ°çš„æ•°æ®å°†åœ¨ç›¸åº”çš„æ•°æ®ç±»å‹ä¸‹æ‰¾åˆ°ï¼Œå¦‚ [Employments](/reference/employments) æˆ– [Incomes](/reference/incomes)ã€‚

> ğŸš§ æ³¨æ„
>
> Sandbox æ¨¡å¼ä¸‹çš„ Archive åªæ”¯æŒæµ‹è¯•ç‰¹å®šçš„å·¥èµ„å•ã€‚è¦åœ¨ Sandbox æ¨¡å¼ä¸‹æµ‹è¯• Archiveï¼Œæ‚¨å¯ä»¥åœ¨ Developer Portal ä¸‹è½½å·¥èµ„å•æ ·ä¾‹ï¼Œç„¶åé€šè¿‡ Wink Widget æˆ– API ä¸Šä¼ ã€‚åœ¨ Sandbox æ¨¡å¼ä¸‹ä¸Šä¼ å…¶ä»–æ–‡ä»¶å°†è¿”å›é”™è¯¯ã€‚

## Archive å¯¹è±¡

| å±æ€§         | ç±»å‹               | è¯¦æƒ…                                                                           |
|:-----------|:-----------------|:-----------------------------------------------------------------------------|
| id         | string           | Archive/æ–‡ä»¶çš„å”¯ä¸€ID                                                              |
| createdAt  | date-time        | ç”¨æˆ·ä¸Šä¼ æ–‡ä»¶çš„æ—¶é—´                                                                    |
| providerId | string           | æ€»æ˜¯è®¾ç½®ä¸º `"user-provided"`ï¼Œå› ä¸ºæ˜¯ç”¨æˆ·è‡ªå·±ä¸Šä¼ çš„æ–‡ä»¶                                         |
| userId     | string           | ä¸Šä¼ æ–‡ä»¶çš„äººçš„ç”¨æˆ·ID                                                                  |
| type       | string           | ä¸Šä¼ æ–‡ä»¶çš„ç±»å‹ï¼Œå¯ä»¥æ˜¯ä»¥ä¸‹ä¹‹ä¸€ï¼š`PAYSLIP`ï¼Œ`TAX_DOCUMENT`ï¼Œ`COMPANY_ID`ï¼Œ`SOCIAL_SECURITY`      |
| state      | object           | è¯¥æ–‡ä»¶çš„å½“å‰å¤„ç†çŠ¶æ€ï¼Œè§ä¸‹æ–‡                                                               |
| rawFiles   | array of objects | å…³äºåŸå§‹æ–‡ä»¶çš„å…¶ä»–ç»†èŠ‚                                                                  |

**çŠ¶æ€å¯¹è±¡**

| å±æ€§           | ç±»å‹        | è¯¦æƒ…                                                                                      |
|:-------------|:----------|:----------------------------------------------------------------------------------------|
| status       | string    | æ–‡ä»¶å½“å‰çš„åˆ†æçŠ¶æ€ï¼Œå¯ä»¥æ˜¯ä¸‹åˆ—ä¹‹ä¸€ï¼š`STARTED`ï¼Œ`ANALYZED`ï¼Œ`UNSUPPORTED`ï¼Œ`ERROR`ï¼Œ`REVOKED`                  |
| errorCode    | string    | åœ¨åˆ†æè¿‡ç¨‹ä¸­å‘ç°çš„ä»»ä½•é”™è¯¯ï¼Œå¯ä»¥æ˜¯ä¸‹åˆ—ä¹‹ä¸€ï¼š`MISSING_MANDATORY_FIELD`, `INVALID_FIELD_FORMAT`, `SYSTEM_ERROR` |
| errorMessage | string    | ä¸Šè¿° "errorCode" çš„å¯è¯»é”™è¯¯ä¿¡æ¯                                                                  |
| updatedAt    | date-time | æ–‡ä»¶æœ€åä¸€æ¬¡æ›´æ–°/åˆ†æçš„æ—¶é—´                                                                          |

**åŸå§‹æ–‡ä»¶å¯¹è±¡**

| å±æ€§        | ç±»å‹        | è¯¦æƒ…                                                                               |
|:----------|:----------|:---------------------------------------------------------------------------------|
| id        | string    | åŸå§‹æ–‡ä»¶çš„å”¯ä¸€ID                                                                        |
| createdAt | date-time | ç”¨æˆ·ä¸Šä¼ æ–‡ä»¶çš„æ—¶é—´                                                                        |
| name      | string    | ç”¨æˆ·ä¸Šä¼ æ–‡ä»¶çš„æ–‡ä»¶å                                                                       |
| subType   | string    | æ›´æ–°çš„æ–‡ä»¶ç±»å‹                                                                          |
| size      | integer   | æ–‡ä»¶å¤§å°ï¼Œä»¥åƒå­—èŠ‚ä¸ºå•ä½                                                                     |
| format    | string    | æ–‡ä»¶çš„æ ¼å¼ï¼Œå¯ä»¥æ˜¯ä»¥ä¸‹ä¹‹ä¸€ï¼š`pdf`ï¼Œ`png`ï¼Œ`tiff`ï¼Œ`jpeg`                                          |
| url       | string    | æ–‡ä»¶çš„å¯è®¿é—®URL                                                                        |

## Archive æ•°æ®æ ·æœ¬


``` json
{
   "id": "archive-123abc456def789abc123def456abc78",
   "createdAt": "2022-11-01T10:00:00Z",
   "providerId": "user-provided",
   "userId": "tenandId-123abc456def789abc123def456abc78",
   "type": "TAX_DOCUMENT",
   "state": {
     "status": "ANALYZED",
     "errorCode": null,
     "errorMessage": null,
     "updatedAt": "2022-11-17T02:04:21Z"
   },
   "rawFiles": [
      {
         "id": "f-123abc456def789abc123def456abc78",
         "createdAt": "2022-11-01T10:00:00Z",
         "name": "ITR-2020-2021.png",
         "subType": "TAX_PAYMENT",
         "size": 300,
         "format": "PNG",
         "url": "https://url-to-file.png"
      }
      ]
   },
   {
      "id": "archive-123abc456def789abc123def456abc78",
      "createdAt": "2022-11-01T10:00:00Z",
      "providerId": "user-provided",
      "userId": "tenantId-123abc456def789abc123def456abc78",
      "type": "PAYSLIP",
      "state": {
         "status": "UNSUPPORTED",
         "errorCode": null,
         "errorMessage": null,
         "updatedAt": "2022-11-17T02:04:21Z"
      },
      "rawFiles": [
      {
         "id": "f-123abc456def789abc123def456abc78",
         "createdAt": "2022-11-01T10:00:00Z",
         "name": "payslip-november-2022.jpeg",
         "subType": "PAYSLIP",
         "size": 100,
         "format": "JPEG",
         "url": "https://url-to-file.jpeg"
      }
      ]
   }
}
```


## ç«¯ç‚¹

| ç«¯ç‚¹                                         | |
|:-------------------------------------------| :---- |
| [è·å– Archives åˆ—è¡¨](/v1.0-Chinese/reference/list-archives) | `GET /archives` |
| [è·å–ä¸€æ¡ Archive è®°å½•](/v1.0-Chinese/reference/get-archive)  | `GET /archives/{id}` |
| [ä¸Šä¼ å·¥èµ„å•æ–‡ä»¶](/reference/upload-payslip-file) | `POST /archives/-/payslips/uploadRawFile` |

## Webhooks

### `ARCHIVE_STARTED`

å½“ç”¨æˆ·ä¸Šä¼ ä¸€ä¸ªæˆ–å‡ ä¸ªæ–‡ä»¶ï¼ˆ"Archive"ï¼‰åˆ° Smile æ—¶ï¼Œæ­¤ Webhook äº‹ä»¶ä¼šè¢«è§¦å‘ã€‚

``` json
{
   "id": "et-123abc456def789abc123def456abc78",
   "version": 1,
   "type": "ARCHIVE_STARTED",
   "createdAt": "2021-04-14T09:30:24Z",
   "data": {
      "userId": "tenantId-123abc456def789abc123def456abc78",
      "archiveId": "archive-123abc456def789abc123def456abc78"
   }
}
```

### `ARCHIVE_ANALYZED`

å½“ Archive å·²é€šè¿‡ OCR è§£æä¸º JSON æ•°æ®æ—¶ï¼Œæ­¤ Webhook äº‹ä»¶ä¼šè¢«è§¦å‘ã€‚

``` json
{
   "id": "et-123abc456def789abc123def456abc78",
   "version": 1,
   "type": "ARCHIVE_STARTED",
   "createdAt": "2021-04-14T09:30:24Z",
   "data": {
      "userId": "tenantId-123abc456def789abc123def456abc78",
      "archiveId": "archive-123abc456def789abc123def456abc78"
   }
}
```

### `ARCHIVE_REVOKED`

å½“ç”¨æˆ·å–æ¶ˆè®¿é—® Archive çš„æƒé™æ—¶ï¼Œæ­¤ Webhook äº‹ä»¶ä¼šè¢«è§¦å‘ã€‚

``` json
{
   "id": "et-123abc456def789abc123def456abc78",
   "version": 1,
   "type": "ARCHIVE_REVOKED",
   "createdAt": "2021-04-14T09:30:24Z",
   "data": {
      "userId": "tenantId-123abc456def789abc123def456abc78",
      "archiveId": "archive-123abc456def789abc123def456abc78"
   }
}
```

### `ARCHIVE_FAILED`

å½“ Archive åˆ›å»ºæˆ–åˆ†æè¿‡ç¨‹å¤±è´¥æ—¶ï¼Œæ­¤ Webhook äº‹ä»¶ä¼šè¢«è§¦å‘ã€‚

``` json
{
   "id": "et-123abc456def789abc123def456abc78",
   "version": 1,
   "type": "ARCHIVE_FAILED",
   "createdAt": "2021-04-14T09:30:24Z",
   "data": {
      "userId": "tenantId-123abc456def789abc123def456abc78",
      "archiveId": "archive-123abc456def789abc123def456abc78",
      "errorCode": "FILE_UNABLE_TO_RECOGNIZE",
      "errorMessage": "Invalid file!"
   }
}
```

## äº‹ä»¶ç›‘å¬å™¨

SDK è¿˜å¯ä»¥å‘å‡ºç‰¹å®šçš„äº‹ä»¶ï¼Œè¯¥äº‹ä»¶å¯è¢«æ‚¨çš„æœ¬åœ°åº”ç”¨ç¨‹åºæ•è·ï¼Œä»¥ä¾¿åº”ç”¨ç¨‹åºæ ¹æ®éœ€è¦ä½œå‡ºååº”å’Œæ‰§è¡ŒåŠŸèƒ½ã€‚

| å›è°ƒ | æ•°æ®                  | è¯¦æƒ…                                  |
| :------- |:--------------------|:------------------------------------|
| `onUploadsCreated` | `uploads`, `userid` | å½“ç”¨æˆ·é€šè¿‡ SDK ä¸Šä¼ æ–‡ä»¶æ—¶è§¦å‘ï¼ŒåŒ…å«ä¸Šä¼ é˜Ÿåˆ—å’Œç”¨æˆ·çš„ userID |
